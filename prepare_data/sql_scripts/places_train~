CREATE TABLE IF NOT EXISTS
routes_location (
	place_id BIGINT NOT NULL,
	route_id BIGINT NOT NULL
);

TRUNCATE TABLE routes_location;

INSERT INTO routes_location (place_id, route_id)
SELECT
	places.id as place_id,
	routes.id as route_id
FROM places,
(SELECT DISTINCT
	relations.id,
	nodes.id as node_id,
	--nodes.tags->'name',
	nodes.geom
FROM relations, relation_members, nodes
WHERE
	relations.tags->'type'='route' and
	relations.tags->'route'='train' and
	relations.id=relation_members.relation_id and
	--relations.id='2297586' and
	relation_members.member_role='stop' and
	relation_members.member_id=nodes.id) as routes
WHERE
	ST_Contains(places.geom,routes.geom) or
	ST_Crosses(places.geom,routes.geom);